<h1><%= @index.name %></h1>
<h2>
  <%= number_to_currency @index.value %>
  <%= positive_negative_format @index.value_diff, formatter: :currency %>
  <%= positive_negative_format @index.value_diff_percent, formatter: :percentage %>
</h2>
<div>by <%= @index.user.name %></div>
<div>Started on <%= l @index.created_at %></div>

<table class="assets">
  <tbody>
    <!-- Legend -->
    <tr class="assets__legend">
      <td>#</td>
      <td>Name</td>
      <td>Amount</td>
      <td>Value</td>
      <td>Weight</td>
      <td>Market Cap</td>
      <td>Price</td>
    </tr>
    <% @index.positions.each_with_index do |position, idx| %>
      <!-- Asset -->
      <tr class="asset">
        <td><%= idx + 1 %></td>
        <td><%= position.asset.name %></td>
        <td><%= number_with_precision position.size, precision: 2 %> <%= position.asset.code %></td>
        <td><%= number_to_currency position.value %></td>
        <td><%= number_to_percentage position.relative_weight * 100, precision: 0 %></td>
        <td>
          <% if position.asset.market_cap? %>
            <%= number_to_currency position.asset.market_cap, precision: 0 %>
          <% else %>
            N/A
          <% end %>
        </td>
        <td><%= number_to_currency position.asset.price %></td>
      </tr>
    <% end %>
  </tbody>
</table>
