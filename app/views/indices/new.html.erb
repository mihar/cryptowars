<%= form_for @index do |f| %>

<div class="name-asset">
  <%= f.text_field :name, placeholder: 'Name your index...' %>
</div>

<table class="assets">
  <thead>
    <tr class="assets__legend">
      <td>#</td>
      <td>Name</td>
      <td>Market Cap</td>
      <td>Price</td>
      <td>Selected</td>
    </tr>
  </thead>
  <tbody>
    <% @assets.each_with_index do |asset, idx| %>
      <tr class="asset" data-id="<%= asset.id %>" data-code="<%= asset.code %>" data-name="<%= asset.name %>">
        <td><%= idx + 1 %></td>
        <td><%= asset.name %></td>
        <td>
          <% if asset.market_cap? %>
            <%= number_to_currency asset.market_cap, precision: 0 %>
          <% else %>
            N/A
          <% end %>
        </td>
        <td><%= number_to_currency asset.price, precision: 6 %></td>
        <td>
          <%= check_box_tag 'index[codes][]', asset.code, false, class: 'pick' %>
          <%= number_field_tag "index[#{asset.code}_weight]", "",step: '0.01', class: 'weight', style: 'display: none;' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= f.submit %>
<% end %>
